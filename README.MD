# Управление штоком кристаллизационной установки

Данный скрипт используется для управления драйвером штока на основе arduino nano ATmega168 кристаллизационной установки. 

## Особенности

Функциональность:
* возможность запуска протяжки штока как через [Термодат](https://www.termodat.ru/), так и в ручном режиме;
* используются энкодер KY-040 и дисплей LCD1602(HD44780);
* возможность задавать многошаговый режим протяжки(до 10), в каждом из которых своя скорость и длина протяжки;
* скорость вытягивания задается в мм/ч с шагом 0,1 мм/ч;
* длина протяжки задается в см с шагом 0,1 см;
* возможность сохранять значения скоростей, длин и калибровочного коэффициента в EEPROM;  
* при включении все значения загружаются из EEPROM.

## Зависимости

* <LiquidCrystal.h>
* <TimerOne.h>
* <EEPROM.h>


## Подключение

Что куда подключать в виде таблицы



| Номер пина на плате Arduino Nano | Устройство        | Пин на устройстве | Назначение             |
|----------------------------------|-------------------|-------------------|------------------------|
| A0                               | lcd               | rs                |                        |
| A1                               | lcd               | en                |                        |
| A2                               | lcd               | d4                |                        |
| A3                               | lcd               | d5                |                        |
| A3                               | lcd               | d6                |                        |
| A5                               | lcd               | d7                |                        |
| 2                                | encoder           | DT                | Инкремент              |
| 3                                | encoder           | SW                | Средняя кнопка         |
| 4                                | encoder           | CLK               | Декремент              |
| 9                                | stepmotor driver  | ENABLE            | Разрешение на движение |
| 11                               | stepmotor driver  | DIR               | Направление движения   |
| 12                               | stepmotor driver  | STEP              | Импульсы шагов         |
| 10                               | termodat          | p1/p2             | Для запуска протяжки   |


Для запуска протяжки вывод 10 ардуион нужно заземлить, соответсвенно, к термодату протягваются два провода: 1 - от пина 10, 2 - GND. 
У термодата р1 и р2 - это реле, соединяет два входных провода

К остальным устройствам подтягиваются провода питания 5В и GND, кроме драйвера шагового двигателя. К нему подтягивается только питание 5В.

